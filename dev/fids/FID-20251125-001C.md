# FID-20251125-001C – Consolidated Political System (Foundation + Engagement Phases 1–10)

**Status:** PLANNED  
**Priority:** CRITICAL  
**Complexity:** 5/5  
**Created:** 2025-11-25  
**Estimated:** 310–430h (ECHO accelerated real implementation ~22–28h)

## 1. Summary
Unifies Phase 1 (Foundation utilities/types/offline fairness) and Phase 2 (Engagement engines & dynamic systems) into a single execution scaffold ensuring strict DRY, deterministic scheduling, and zero divergence between baseline formulas and interactive loops. Coordinates FID-20251125-001A + FID-20251125-001B acceptance criteria without duplication.

## 2. Objectives
- Provide pure, documented utilities (timeScaling, stateDerivedMetrics, influenceBase, lobbyingBase, offlineProtection) as immovable baseline.  
- Layer campaign, polling, ad spend, debates, election night, endorsements, crises/scandals, dynamic balance scaler, achievements, telemetry bus, and leaderboards strictly atop baseline.  
- Enforce offline fairness clamps and deterministic seeds while maintaining high-frequency engagement loops.  
- Deliver complete legacy parity (states, seats, senate classes, population, GDP, crime metrics) with ZERO omissions.

## 3. Phases
1. **Phase 0:** ECHO Re-Read + Legacy Parity Audit (load legacy code, build parity checklist).  
2. **Phase 1:** Core Types & Utilities (timeScaling, stateDerivedMetrics, influenceBase, lobbyingBase, offlineProtection).  
3. **Phase 2:** Foundation Docs (TIME_SYSTEM.md, POLITICS_SCALING.md) – lock formulas.  
4. **Phase 3:** Engines Set 1 (campaignPhaseMachine, pollingEngine, adSpendCycle).  
5. **Phase 4:** Debate & Election Resolution (debateScheduler, electionNightProgress + recount logic).  
6. **Phase 5:** Events & Scandals (crisisScandal generator, mitigation, deferred offline queue).  
7. **Phase 6:** Endorsements & Dynamic Balance (endorsements system, dynamicBalanceScaler).  
8. **Phase 7:** Achievements & Telemetry (achievements engine, telemetryBus, event schemas).  
9. **Phase 8:** Leaderboards & Broadcasting (leaderboards + throttled Socket.io).  
10. **Phase 9:** Advanced Extensions (extended lobbying probability, offline fairness audit instrumentation).  
11. **Phase 10:** Final Documentation & Reports (ENGAGEMENT_ENGINE_SPEC.md, TELEMETRY_EVENTS.md, consolidated completion report).  

## 4. Unified Acceptance Criteria
- Deterministic time conversion utilities (week/hour/min, election cycle, senate class).  
- Derived metrics: populationShare, gdpShare, seatShare, crimePercentile, compositeInfluenceWeight (variance tests <5%).  
- Baseline influence/lobbying probability pure functions; curve caps (5%–95%).  
- Offline protection: clampDecay, grace periods, autopilotStrategy presets, snapshot/catch-up; offline divergence ≤ fairness threshold.  
- CampaignPhaseMachine: full 26h real cycle (4×6.5h phases) persisted & restart logic.  
- Polling engine: 25m interval, volatility smoothing, offline fairness differential ≤5%.  
- AdSpendCycle: 8.5m cadence, diminishing returns formula documented.  
- DebateScheduler: scheduled at real hours 6/15/22; performance formula (oratorySkill + prepSpend + seed ±2%).  
- ElectionNightProgress: segmented 3.5m reveal batches; recount triggers margin <0.5%, final adjustment ≤0.25%.  
- Endorsements: stacking diminishing returns (1.0, 0.6, 0.36, ...), cooldown (1 game-year), reciprocal bonuses.  
- Crisis/Scandal system: tier limits (1 major, 2 minor), mitigation actions, deferred offline queue semantics.  
- DynamicBalanceScaler: systemic cap & probability modulation (no AI opponents).  
- Achievements engine: event-driven unlocking, offline digest ≤50 notifications.  
- Leaderboards: influence, campaign, legislative success; broadcast throttling ≤1/10s per category.  
- Telemetry bus: structured events (POLLING_TICK, AD_SPEND_APPLIED, DEBATE_RESULT, ENDORSEMENT_GRANTED, CRISIS_TRIGGERED, ACHIEVEMENT_UNLOCKED, LEADERBOARD_UPDATE) with documented schema.  
- Tests: ≥90% coverage (foundation utilities), ≥80% (engines), deterministic seeds for stochastic elements.  
- 0 new TypeScript errors; JSDoc complete; docs: TIME_SYSTEM.md, POLITICS_SCALING.md, ENGAGEMENT_ENGINE_SPEC.md, TELEMETRY_EVENTS.md.  
- Backend–Frontend Dual-Loading Protocol executed before UI/API integration; Contract Matrix verified; index.ts barrels present.  
- Legacy parity checklist 100%: states, senate classes, seat apportionment, population, GDP, crime reference metrics.  

## 5. File Plan (Aggregated)
Foundation Utilities:
- `src/politics/types/politicsTypes.ts`
- `src/politics/utils/timeScaling.ts`
- `src/politics/utils/stateDerivedMetrics.ts`
- `src/politics/utils/influenceBase.ts`
- `src/politics/utils/lobbyingBase.ts`
- `src/politics/utils/offlineProtection.ts`
Engagement Engines & Systems:
- `src/politics/engines/campaignPhaseMachine.ts`
- `src/politics/engines/pollingEngine.ts`
- `src/politics/engines/adSpendCycle.ts`
- `src/politics/engines/debateScheduler.ts`
- `src/politics/engines/electionNightProgress.ts`
- `src/politics/systems/endorsements.ts`
- `src/politics/systems/crisisScandal.ts`
- `src/politics/systems/dynamicBalanceScaler.ts`
- `src/politics/systems/achievements.ts`
- `src/politics/leaderboards/leaderboards.ts`
- `src/politics/events/telemetryBus.ts`
Barrels:
- `src/politics/engines/index.ts`
- `src/politics/systems/index.ts`
- `src/politics/leaderboards/index.ts`
- `src/politics/events/index.ts`
Docs:
- `docs/TIME_SYSTEM.md`
- `docs/POLITICS_SCALING.md`
- `docs/ENGAGEMENT_ENGINE_SPEC.md`
- `docs/TELEMETRY_EVENTS.md`
Tests (examples):
- `tests/politics/timeScaling.test.ts`
- `tests/politics/derivedMetrics.test.ts`
- `tests/politics/influenceBase.test.ts`
- `tests/politics/offlineProtection.test.ts`
- `tests/politics/campaignPhaseMachine.test.ts`
- `tests/politics/pollingEngine.test.ts`
- `tests/politics/debateScheduler.test.ts`
- `tests/politics/electionNightProgress.test.ts`
- `tests/politics/endorsements.test.ts`
- `tests/politics/crisisScandal.test.ts`
- `tests/politics/dynamicBalanceScaler.test.ts`
- `tests/politics/achievements.test.ts`
- `tests/politics/telemetryBus.test.ts`

## 6. Legacy Parity Checklist
- [ ] State list & abbreviations
- [ ] Population figures normalized
- [ ] GDP figures normalized
- [ ] House seat apportionment
- [ ] Senate class mapping (I/II/III)
- [ ] Crime metric reference values
- [ ] Influence weight validation vs legacy patterns

## 7. Risks & Mitigation
| Risk | Impact | Mitigation |
|------|--------|-----------|
| Formula drift | Rework & bugs | Lock formulas post docs, regression tests |
| Volatility exploitation | Fairness erosion | Smoothing + catch-up clamps |
| Scheduler misalignment | Event desync | Centralized timeScaling usage |
| Broadcast/notification spam | UX fatigue | Throttle + batch dispatch |
| Balance scaler oversuppression | Player frustration | Simulation + transparent thresholds |

## 8. Metrics / Success
- Offline divergence fairness metric ≤ defined threshold (≤5% advantage).  
- Interaction frequency ≥12 meaningful actions per campaign cycle.  
- Leaderboard broadcast compliance (no category >1/10s).  
- Test coverage thresholds achieved (foundation ≥90%, engines ≥80%).  
- 0 new TypeScript errors introduced.  
- Parity checklist 100% complete.  

## 9. Completion Artifacts
- `COMPLETION_REPORT_FID-20251125-001C_<date>.md` (summary, metrics, fairness audit, telemetry schema).  
- Lessons learned appended to `dev/lessons-learned.md`.  
- Parity checklist final state embedded in completion report.  

## 10. Exit Criteria
All phases implemented; acceptance criteria met; docs finalized; tests green; parity checklist complete; DRY audit passes; telemetry events functioning; GUARDIAN compliance maintained.

---
*ECHO v1.3.0 – GUARDIAN protocol enforced; utility‑first, DRY, deterministic political system execution.*
