# FID-20251205-011: Revenue Industry Tick Processors

**Status:** COMPLETED  
**Priority:** P1 (High)  
**Complexity:** 4 (Complex)  
**Estimated:** 20-28h  
**Actual:** ~8h  
**Created:** 2025-12-05  
**Started:** 2025-12-05  
**Completed:** 2025-12-05  
**Depends On:** FID-20251205-010 (Core Industry Tick Processors)

---

## Summary

Build tick processors for revenue-generating industries:
1. **Retail/E-Commerce** - Order processing, inventory, returns ✅
2. **Technology (SaaS)** - Subscription billing, compute usage ✅
3. **Media** - Ad revenue, audience growth, content decay ✅
4. **Consulting** - Project progress, billing cycles ✅

These complete the "earning" layer of the game economy.

---

## Acceptance Criteria

- [x] Retail tick processor processes pending orders
- [x] Retail tick processor manages inventory turnover
- [x] Tech tick processor bills SaaS subscriptions monthly
- [x] Tech tick processor tracks compute resource usage
- [x] Media tick processor calculates ad revenue from audiences
- [x] Media tick processor applies content decay (older content earns less)
- [x] Consulting tick processor advances project milestones
- [x] Consulting tick processor generates billing based on progress
- [x] All processors integrate with TickEngine
- [x] TypeScript: 0 errors

---

## Implementation Approach

### Phase 1: Retail/E-Commerce Processor (6h)
```typescript
// src/lib/game/tick/retailProcessor.ts
- Process pending orders (mark shipped/delivered)
- Calculate revenue from completed orders
- Handle returns (refunds, restocking)
- Update inventory levels
- Calculate customer acquisition costs
- Return RetailTickSummary
```

### Phase 2: Technology Processor (6h)
```typescript
// src/lib/game/tick/techProcessor.ts
- Bill active SaaS subscriptions
- Handle subscription churn (cancellations)
- Calculate compute marketplace revenue
- Process AI API usage billing
- Track MRR/ARR metrics
- Return TechTickSummary
```

### Phase 3: Media Processor (6h)
```typescript
// src/lib/game/tick/mediaProcessor.ts
- Calculate ad impressions from audience sizes
- Apply CPM rates for ad revenue
- Process sponsorship deal payments
- Apply content decay (older = less engagement)
- Track audience growth/churn
- Return MediaTickSummary
```

### Phase 4: Consulting Processor (4h)
```typescript
// src/lib/game/tick/consultingProcessor.ts
- Advance active project progress
- Trigger milestone completions
- Generate invoices based on billing model
- Handle project completions
- Calculate utilization rates
- Return ConsultingTickSummary
```

### Phase 5: Integration (4h)
- Register all processors with TickEngine
- Update API to include results
- Full integration testing

---

## Files

| Action | Path | Description |
|--------|------|-------------|
| NEW | `src/lib/game/tick/retailProcessor.ts` | Retail/e-commerce processor |
| NEW | `src/lib/game/tick/techProcessor.ts` | Technology/SaaS processor |
| NEW | `src/lib/game/tick/mediaProcessor.ts` | Media/advertising processor |
| NEW | `src/lib/game/tick/consultingProcessor.ts` | Consulting projects processor |
| MOD | `src/lib/types/gameTick.ts` | Add tick summary types |
| MOD | `src/lib/game/tick/index.ts` | Export new processors |

---

## Dependencies

- FID-20251205-010 (Core processors complete)
- Existing models: ProductListing, Order, SoftwareProduct, SaaSSubscription, MediaContent, Audience, ConsultingProject

---

## Notes

- These are the "revenue layer" - how players make money
- Each processor should be idempotent (safe to re-run)
- Consider transaction batching for performance
