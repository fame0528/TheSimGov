# FID-20251205-013: Logistics Industry (New)

**Status:** PLANNED  
**Priority:** P2 (Medium)  
**Complexity:** 4 (Complex)  
**Estimated:** 16-24h  
**Created:** 2025-12-05  
**Depends On:** FID-20251205-010 (Core Tick Processors)

---

## Summary

Create the Logistics industry from scratch - the missing "movement" layer that connects all other industries. Every physical good needs to be transported, stored, and distributed.

---

## Acceptance Criteria

- [ ] Vehicle model for trucks, ships, planes with capacity and costs
- [ ] Warehouse model for storage facilities with inventory tracking
- [ ] Route model for delivery paths with time/cost/risk
- [ ] ShippingContract model for customer agreements
- [ ] Fleet API endpoints (CRUD for vehicles)
- [ ] Warehouse API endpoints (CRUD + inventory)
- [ ] Shipping API endpoints (create shipments, track deliveries)
- [ ] Logistics tick processor (fleet operations, deliveries)
- [ ] LogisticsDashboard UI component
- [ ] TypeScript: 0 errors

---

## Implementation Approach

### Phase 1: Data Models (6h)
```typescript
// src/lib/db/models/logistics/Vehicle.ts
interface IVehicle {
  companyId: ObjectId;
  type: 'TRUCK' | 'VAN' | 'SHIP' | 'PLANE' | 'TRAIN';
  name: string;
  capacity: number;          // Cubic feet or tons
  fuelEfficiency: number;    // Miles per gallon
  maintenanceCost: number;   // Per month
  purchasePrice: number;
  currentLocation: string;   // State/city
  status: 'AVAILABLE' | 'IN_TRANSIT' | 'MAINTENANCE';
  mileage: number;
  condition: number;         // 0-100%
}

// src/lib/db/models/logistics/Warehouse.ts
interface IWarehouse {
  companyId: ObjectId;
  name: string;
  location: { state: string; city: string };
  totalCapacity: number;     // Cubic feet
  usedCapacity: number;
  operatingCost: number;     // Per month
  inventory: {
    productId: ObjectId;
    quantity: number;
    reservedQuantity: number;
  }[];
  features: string[];        // 'REFRIGERATED', 'HAZMAT', 'SECURE'
}

// src/lib/db/models/logistics/Route.ts
interface IRoute {
  companyId: ObjectId;
  name: string;
  origin: { state: string; city: string };
  destination: { state: string; city: string };
  distance: number;          // Miles
  estimatedTime: number;     // Hours
  baseCost: number;          // Fuel + tolls
  riskLevel: number;         // 0-100
  frequency: 'ONE_TIME' | 'DAILY' | 'WEEKLY';
}

// src/lib/db/models/logistics/ShippingContract.ts
interface IShippingContract {
  companyId: ObjectId;       // Logistics company
  clientCompanyId: ObjectId; // Customer
  type: 'SPOT' | 'CONTRACT';
  routes: ObjectId[];
  pricePerMile: number;
  minimumVolume: number;
  startDate: Date;
  endDate: Date;
  status: 'ACTIVE' | 'PENDING' | 'EXPIRED';
}
```

### Phase 2: API Routes (6h)
```
POST/GET    /api/logistics/vehicles
GET/PATCH/DELETE /api/logistics/vehicles/[id]

POST/GET    /api/logistics/warehouses
GET/PATCH   /api/logistics/warehouses/[id]
POST        /api/logistics/warehouses/[id]/inventory

POST/GET    /api/logistics/shipments
GET/PATCH   /api/logistics/shipments/[id]
POST        /api/logistics/shipments/[id]/track
```

### Phase 3: Tick Processor (4h)
```typescript
// src/lib/game/tick/logisticsProcessor.ts
- Update in-transit shipments (advance position)
- Complete arrived deliveries
- Apply maintenance to vehicles
- Calculate fuel costs
- Process contract billing
- Return LogisticsTickSummary
```

### Phase 4: UI Components (6h)
```typescript
// src/components/logistics/
- FleetManager.tsx - Vehicle management
- WarehouseView.tsx - Inventory tracking
- ShipmentTracker.tsx - Active shipments
- RouteOptimizer.tsx - Route planning
- LogisticsDashboard.tsx - Main dashboard
```

---

## Files

| Action | Path | Description |
|--------|------|-------------|
| NEW | `src/lib/db/models/logistics/Vehicle.ts` | Vehicle model |
| NEW | `src/lib/db/models/logistics/Warehouse.ts` | Warehouse model |
| NEW | `src/lib/db/models/logistics/Route.ts` | Route model |
| NEW | `src/lib/db/models/logistics/ShippingContract.ts` | Contract model |
| NEW | `src/lib/db/models/logistics/Shipment.ts` | Active shipment model |
| NEW | `src/lib/db/models/logistics/index.ts` | Barrel exports |
| NEW | `src/lib/types/logistics.ts` | Type definitions |
| NEW | `src/app/api/logistics/` | API routes |
| NEW | `src/lib/game/tick/logisticsProcessor.ts` | Tick processor |
| NEW | `src/components/logistics/` | UI components |
| NEW | `src/hooks/useLogistics.ts` | SWR hooks |

---

## Dependencies

- FID-20251205-010 (for tick engine integration)
- Real Estate (warehouse locations)
- Manufacturing (product shipments)
- Retail/E-Commerce (last-mile delivery)

---

## Synergies Enabled

| From | To | Benefit |
|------|-----|---------|
| Logistics | Manufacturing | Reduced shipping costs |
| Logistics | Retail | Faster delivery times |
| Logistics | Crime | Distribution network cover |
| Energy | Logistics | Fuel discounts |
| Banking | Logistics | Fleet financing |

---

## Notes

- This is the ONLY missing industry
- Enables Manufacturing â†’ Retail supply chain
- Enables Crime distribution routes
- Creates new revenue stream for players
